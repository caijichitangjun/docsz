<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack资源打包（上） | QianXiao</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/docsz/assets/img/logo.ico">
    <meta name="description" content="简介webpack资源打包的相关配置">
    
    <link rel="preload" href="/docsz/assets/css/0.styles.b8a772e3.css" as="style"><link rel="preload" href="/docsz/assets/js/app.22c8ad57.js" as="script"><link rel="preload" href="/docsz/assets/js/3.837f952b.js" as="script"><link rel="preload" href="/docsz/assets/js/1.3b490a96.js" as="script"><link rel="preload" href="/docsz/assets/js/53.32df1ffa.js" as="script"><link rel="prefetch" href="/docsz/assets/js/10.9778ad93.js"><link rel="prefetch" href="/docsz/assets/js/11.0a0ed3b5.js"><link rel="prefetch" href="/docsz/assets/js/12.5cf01cbe.js"><link rel="prefetch" href="/docsz/assets/js/13.5e135359.js"><link rel="prefetch" href="/docsz/assets/js/14.5f00995e.js"><link rel="prefetch" href="/docsz/assets/js/15.1e067037.js"><link rel="prefetch" href="/docsz/assets/js/16.3e498ed7.js"><link rel="prefetch" href="/docsz/assets/js/17.a3c13a2f.js"><link rel="prefetch" href="/docsz/assets/js/18.4f4f943d.js"><link rel="prefetch" href="/docsz/assets/js/19.f12447de.js"><link rel="prefetch" href="/docsz/assets/js/20.7f1fb3a7.js"><link rel="prefetch" href="/docsz/assets/js/21.718d4e9c.js"><link rel="prefetch" href="/docsz/assets/js/22.ce9172d8.js"><link rel="prefetch" href="/docsz/assets/js/23.dc70db5d.js"><link rel="prefetch" href="/docsz/assets/js/24.272a291a.js"><link rel="prefetch" href="/docsz/assets/js/25.0d01fa50.js"><link rel="prefetch" href="/docsz/assets/js/26.b099c374.js"><link rel="prefetch" href="/docsz/assets/js/27.09642db6.js"><link rel="prefetch" href="/docsz/assets/js/28.02e2e6ae.js"><link rel="prefetch" href="/docsz/assets/js/29.afc3b1a3.js"><link rel="prefetch" href="/docsz/assets/js/30.11f39e4a.js"><link rel="prefetch" href="/docsz/assets/js/31.28cda555.js"><link rel="prefetch" href="/docsz/assets/js/32.e61db7cf.js"><link rel="prefetch" href="/docsz/assets/js/33.8e5af6b8.js"><link rel="prefetch" href="/docsz/assets/js/34.739d64b3.js"><link rel="prefetch" href="/docsz/assets/js/35.8160085f.js"><link rel="prefetch" href="/docsz/assets/js/36.7c9c358c.js"><link rel="prefetch" href="/docsz/assets/js/37.eb53b003.js"><link rel="prefetch" href="/docsz/assets/js/38.fb045eba.js"><link rel="prefetch" href="/docsz/assets/js/39.e6d94ddf.js"><link rel="prefetch" href="/docsz/assets/js/4.b08e0ae1.js"><link rel="prefetch" href="/docsz/assets/js/40.ff3250b1.js"><link rel="prefetch" href="/docsz/assets/js/41.9b762866.js"><link rel="prefetch" href="/docsz/assets/js/42.cc21058e.js"><link rel="prefetch" href="/docsz/assets/js/43.f3f8f9d7.js"><link rel="prefetch" href="/docsz/assets/js/44.69420f77.js"><link rel="prefetch" href="/docsz/assets/js/45.68432cb2.js"><link rel="prefetch" href="/docsz/assets/js/46.57b1a9aa.js"><link rel="prefetch" href="/docsz/assets/js/47.90c488b4.js"><link rel="prefetch" href="/docsz/assets/js/48.86e3b04e.js"><link rel="prefetch" href="/docsz/assets/js/49.e125e40a.js"><link rel="prefetch" href="/docsz/assets/js/5.e43cd8d6.js"><link rel="prefetch" href="/docsz/assets/js/50.afc78d7a.js"><link rel="prefetch" href="/docsz/assets/js/51.a2e4d5a5.js"><link rel="prefetch" href="/docsz/assets/js/52.6b9e8808.js"><link rel="prefetch" href="/docsz/assets/js/54.95097e27.js"><link rel="prefetch" href="/docsz/assets/js/55.1f6e4fcd.js"><link rel="prefetch" href="/docsz/assets/js/56.07b8c84a.js"><link rel="prefetch" href="/docsz/assets/js/57.b112991e.js"><link rel="prefetch" href="/docsz/assets/js/58.ac91d836.js"><link rel="prefetch" href="/docsz/assets/js/59.f30c9924.js"><link rel="prefetch" href="/docsz/assets/js/6.801f6138.js"><link rel="prefetch" href="/docsz/assets/js/7.40a4ddc5.js"><link rel="prefetch" href="/docsz/assets/js/8.a88053a9.js"><link rel="prefetch" href="/docsz/assets/js/9.58bb1686.js">
    <link rel="stylesheet" href="/docsz/assets/css/0.styles.b8a772e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>QianXiao</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>一枚小菜鸡的学习日记</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>qianxiao</span>
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docsz/" class="home-link router-link-active"><img src="/docsz/assets/img/mydaughter.jpg" alt="QianXiao" class="logo"> <span class="site-name">QianXiao</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docsz/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      基础学习
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docsz/categories/code/" class="nav-link"><i class="undefined"></i>
  code
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/JavaScript/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/vue/" class="nav-link"><i class="undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/css/" class="nav-link"><i class="undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/html/" class="nav-link"><i class="undefined"></i>
  html
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/webpack/" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/help/" class="nav-link"><i class="undefined"></i>
  help
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/discuss/" class="nav-link"><i class="undefined"></i>
  discuss
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/vscode/" class="nav-link"><i class="undefined"></i>
  vscode
</a></li></ul></div></div><div class="nav-item"><a href="/docsz/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/docsz/help/aboutMy.html" class="nav-link"><i class="undefined"></i>
  个人信息
</a></div><div class="nav-item"><a href="/docsz/code/property.html" class="nav-link"><i class="iconfont reco-github"></i>
  实例代码
</a></div><div class="nav-item"><a href="/docsz/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="/docsz/help/h1.html" class="nav-link"><i class="iconfont reco-faq"></i>
  帮助
</a></div><div class="nav-item"><a href="/docsz/help/question.html" class="nav-link"><i class="iconfont reco-message"></i>
  意见收集
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <h3 class="name" data-v-39576ba9>
    qianxiao
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>46</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>25</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/docsz/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      基础学习
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docsz/categories/code/" class="nav-link"><i class="undefined"></i>
  code
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/JavaScript/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/vue/" class="nav-link"><i class="undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/css/" class="nav-link"><i class="undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/html/" class="nav-link"><i class="undefined"></i>
  html
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/webpack/" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/help/" class="nav-link"><i class="undefined"></i>
  help
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/discuss/" class="nav-link"><i class="undefined"></i>
  discuss
</a></li><li class="dropdown-item"><!----> <a href="/docsz/categories/vscode/" class="nav-link"><i class="undefined"></i>
  vscode
</a></li></ul></div></div><div class="nav-item"><a href="/docsz/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/docsz/help/aboutMy.html" class="nav-link"><i class="undefined"></i>
  个人信息
</a></div><div class="nav-item"><a href="/docsz/code/property.html" class="nav-link"><i class="iconfont reco-github"></i>
  实例代码
</a></div><div class="nav-item"><a href="/docsz/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="/docsz/help/h1.html" class="nav-link"><i class="iconfont reco-faq"></i>
  帮助
</a></div><div class="nav-item"><a href="/docsz/help/question.html" class="nav-link"><i class="iconfont reco-message"></i>
  意见收集
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>webpack资源打包（上）</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>qianxiao</span>
            
          <!---->
          2022
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">webpack资源打包（上）</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>qianxiao</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>4/26/2022</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>webpack</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="什么是webpack"><a href="#什么是webpack" class="header-anchor">#</a> 什么是webpack？</h2> <p>       webpack 是一个用于现代 JavaScript 应用程序的静态模块打包工具。它可以将我们编写的<code>.vue</code>文件、<code>.jsx</code>文件等打包编译成原始的js文件，同时对版本进行控制。<br>
       当然，现在前端的很多框架都对webpack进行了封装，需要我们亲自动手的内容很少了，但还是推荐大家了解下相关知识。</p> <h3 id="插件安装"><a href="#插件安装" class="header-anchor">#</a> 插件安装</h3> <p>       因为webpack在打包时需要处理各种各样的资源，因此需要的依赖包和插件就很多，这里列出的资源包大家仅做了解即可。</p> <ul><li>webpack: npm i webpack -g</li> <li>webpack-cli: npm i webpack-cli -g
使我们能够使用命令的形式打包文件）</li> <li>style-loader: npm i style-loader -D
-D为局部安装，创建style标签，将js中的样式资源插入进行，添加到head中生效</li> <li>css-loader: npm i style-loader -D
将css文件变成commonjs模块加载js中，里面内容是样式字符串</li> <li>html-webpack-plugin
打包html文件</li> <li>less-loader: npm i less-loader -D
将less文件转化为css文件</li> <li>ur1-loader:</li> <li>file-loader: 处理img文件打包</li> <li>webpack-dev-server
指令为npx  webpack-dev-server 。在内存中编译，不会产生输出，自动编译，自动打开浏览器、自动刷新</li> <li>mini-css-extract-plugin
提取css到单独的文件</li> <li>postcss-loader</li> <li>postcss-preset-env
处理兼容性问题</li> <li>optimize-css-assets-webpack-plugin
压缩css</li> <li>eslint-loader:</li> <li>eslint:</li> <li>eslint-config-airbnb-base:</li> <li>eslint-plugin-import
全部都用于语法检查，后两个是使用airbnb进行语法检查，</li> <li>babel-loader</li> <li>@babel/preset-env</li> <li>@babel/core</li> <li>@babel/ployfill</li> <li>core-js
js兼容性配置</li> <li>workbox-webpack-plugin
pwa相关</li> <li>thread-loader
多进程打包</li> <li>add-asset-html-webpack-plugin
自动引入某个包输出，并在html中自动引入该资源</li></ul> <h2 id="资源打包"><a href="#资源打包" class="header-anchor">#</a> 资源打包</h2> <p>       因为webpack只能对原始的js文件打包，因此对于其它后缀名的文件都需要单独配置，以完成webpack对其的打包。</p> <h3 id="配置文件webpack-config-js"><a href="#配置文件webpack-config-js" class="header-anchor">#</a> 配置文件webpack.config.js</h3> <p><code>webpack.config.js</code>的基础配置如下所示。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取当前目录绝对路径，一般用于拼接路径</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'built.js'</span><span class="token punctuation">,</span>
    <span class="token comment">// __dirname代表当前文件的目录绝对路径</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'built'</span><span class="token punctuation">)</span>   
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>

    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>

  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Entry
入口文件，即打包文件从哪里开始，类似于java项目中的main文件（这句不懂也没关系）
单入口文件: <code>entry : './src/js/index.js'</code>,
多入口文件:<div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">{</span>             
  <span class="token comment">// 多入口:有一个入口，最终输出就有一个bundle</span>
    <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">'./src/js/index.js'</span> <span class="token punctuation">,</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token string">'./src/js/test.js'</span>
<span class="token punctuation">}</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`
</code></pre></div></li> <li>Output
输出文件，即编译好的文件会放在哪里，这里可能会用到获取当前的绝对路径（代码: ）
output: {
filename: 'js/[name].[contenthash:10].js',<br>
//  [name]:在多入口文件时，取文件名（key），单文件时可以自命名或...
path: resolve(__dirname,'build' )
},</li> <li>Loader: 指导webpack处理那些非js文件【在文件中为: module】</li> <li>Plugins: 插件的声明区，插件可以帮webpack执行更广的任务。</li> <li>mode: development / production</li></ul> <h3 id="css"><a href="#css" class="header-anchor">#</a> css</h3> <h4 id="css文件打包"><a href="#css文件打包" class="header-anchor">#</a> css文件打包</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// module ==&gt; rules</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>     <span class="token comment">//   正则匹配需要打包的文件</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token comment">// 使用哪些loader进行处理</span>
      <span class="token comment">// 执行顺序: 从右到左，从下到上依次执行   </span>
      <span class="token comment">// 创建style标签，将js中的样式资源插入进行，添加到head中生效</span>
      <span class="token string">'style-loader'</span><span class="token punctuation">,</span>       
      <span class="token comment">// 将css文件变成commonjs模块加载js中，里面内容是样式字符串</span>
      <span class="token string">'css-loader'</span><span class="token punctuation">,</span> 
      <span class="token comment">// 将less文件转化为css文件   【如果仅打包css，则不需要这句话】</span>
      <span class="token string">'less-loader'</span><span class="token punctuation">,</span>   
    <span class="token punctuation">]</span>    
  <span class="token punctuation">}</span><span class="token punctuation">]</span>    
</code></pre></div><h4 id="打包到指定位置"><a href="#打包到指定位置" class="header-anchor">#</a> 打包到指定位置</h4> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 引入插件mini-css-extract-plugin: css打包工具，需npm下载</span>
  <span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// module ==&gt; rules</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token comment">//取代style-loader，将css取出到单独文件</span>
      MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> 
      <span class="token string">'css-loader'</span>
      <span class="token string">'less-loader'</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// plugins</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">//对输出的文件重命名</span>
    <span class="token keyword">new</span> <span class="token class-name">MinicssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'css/built.css'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>   
</code></pre></div><h4 id="兼容性处理"><a href="#兼容性处理" class="header-anchor">#</a> 兼容性处理</h4> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// module ==&gt; rules ==&gt; use</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">{</span>  
    MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>         
    <span class="token string">'css-loader'</span><span class="token punctuation">,</span>       
    <span class="token punctuation">{</span>                 <span class="token comment">//  postcss的插件</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">ident</span><span class="token operator">:</span> <span class="token string">'postcss '</span><span class="token punctuation">,</span>
        <span class="token function-variable function">plugins</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">[</span>           
          <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'postcss-preset-env'</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>     
  
  <span class="token comment">// package.json文件下添加配置</span>
  <span class="token string-property property">&quot;browserslist&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 可以用配置选项</span>
    <span class="token comment">// &quot;&gt; 1%&quot;, //全球超过1%人使用的浏览器</span>
    <span class="token comment">// &quot;last 2 versions&quot;,  //所有浏览器兼容到最后两个版本根据CanIUse.com追踪的版本</span>
    <span class="token comment">// &quot;not ie &lt;= 8&quot; , //方向排除部分版本</span>
    <span class="token comment">// &quot;since 2013&quot; ,  //2013年之后发布的所有版本</span>
    <span class="token comment">// &quot;Firefox ESR&quot; , //火狐最新版本</span>
    <span class="token comment">// &quot;Firefox 12.1&quot;, //指定浏览器的兼容到指定版本</span>
    <span class="token comment">// &quot;Firefox &gt; 20&quot;, //Firefox的版本比20更新 &gt;=，&lt; 并且也可以 &lt;= 工作</span>
    <span class="token comment">// &quot;cover 99.5%&quot;,  //提供覆盖的最流行的浏览器</span>
    <span class="token comment">// &quot;unreleased versions&quot; , //alpha和beta版本</span>
    <span class="token comment">// &quot;defaults&quot; , //Browserslist的默认浏览器（&gt; 0.5%, last 2 versions, Firefox ESR, not dead）。</span>
    <span class="token string-property property">&quot;development&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;production&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span> 
</code></pre></div><h4 id="css压缩"><a href="#css压缩" class="header-anchor">#</a> css压缩</h4> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// optimize-css-assets-webpack-plugin: css压缩工具，需npm下载</span>
  <span class="token keyword">const</span> OptimizeCssAssetsWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span>       

  <span class="token comment">// plugins</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">// 压缩css文件</span>
    <span class="token keyword">new</span> <span class="token class-name">OptimizeCssAssetsWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     
  <span class="token punctuation">]</span><span class="token punctuation">,</span> 
</code></pre></div><h3 id="html"><a href="#html" class="header-anchor">#</a> html</h3> <h4 id="打包html资源"><a href="#打包html资源" class="header-anchor">#</a> 打包html资源</h4> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// html-webpack-plugin: html打包工具，需npm下载</span>
  <span class="token keyword">const</span> HtmlwebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'html-webpack-plugin'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">//  复制 ‘./src/index.htm1’文件，并自动引入打包输出的所有资源（JS/css)</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlwebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span> 
</code></pre></div><h4 id="html代码压缩"><a href="#html代码压缩" class="header-anchor">#</a> html代码压缩</h4> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// html-webpack-plugin: html打包工具，需npm下载</span>
  <span class="token keyword">const</span> HtmlwebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'html-webpack-plugin'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">//  复制 ‘./src/index.htm1’文件，并自动引入打包输出的所有资源（JS/css)</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlwebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./ src/index.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">collapsewhitespace</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">//移除空格</span>
        <span class="token literal-property property">removeComments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token comment">//移除注释</span>
      <span class="token punctuation">}</span>    
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span> 
</code></pre></div><h3 id="图片资源打包"><a href="#图片资源打包" class="header-anchor">#</a> 图片资源打包</h3> <div class="language-JS extra-class"><pre class="language-js"><code>  <span class="token comment">// module ==&gt; rules </span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.(jpg | png | gif)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader '</span><span class="token punctuation">,</span>  <span class="token comment">//使用一个loader</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 图片大小小于8kb，就会被base64处理,减少请求数量</span>
      <span class="token comment">// 作用: 减轻服务器压力，但图片体积会更大(文件请求速度更慢)</span>
      <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">8</span><span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> 
      <span class="token comment">// url-loader默认使用es6模块化处理，而html-loader引入图片是commonjs，</span>
      <span class="token comment">// 因此解析时资源地址会被解析为[object Module]</span>
      <span class="token comment">// 解决:关闭url-loader的es6模块化，使用commonjs解析   </span>
      <span class="token literal-property property">esModule</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// [hash: 10]取图片的hash的前10位; [ext]取文件原来扩展名</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[hash: 10].[ext]'</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>  
    <span class="token comment">// 处理html中的图片（负责引入，进而被url-loader处理）</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'html-loader'</span> 
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="打包其他资源"><a href="#打包其他资源" class="header-anchor">#</a> 打包其他资源</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// module ==&gt; rules </span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token comment">//排除css/js/html/less资源</span>
    <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|js|htm1|less)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>     
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>     
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;[hash: 10]:[ext]&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="js语法检查与兼容性"><a href="#js语法检查与兼容性" class="header-anchor">#</a> js语法检查与兼容性</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// package.json,添加配置,加载语法检查库</span>
  <span class="token string-property property">&quot;eslintConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;airbnb-base&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// module ==&gt; rules </span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token comment">// 语法检查</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span>   <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.js$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>        <span class="token comment">//只检查自己写的代码，下载的依赖不管</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'eslint-loader'</span> <span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token comment">// 兼容性处理</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token comment">//只检查自己写的代码，下载的依赖不管</span>
    <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>        
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span> <span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token comment">//预设:指示babel做怎么样的兼容性处理</span>
      <span class="token literal-property property">presets</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 该工具也有一定的问题：只能转换基本语法，primise等就不能转换</span>
        <span class="token comment">// 需要全部兼容，需要使用`@babel/ployfill`</span>
        <span class="token comment">// 在需要的文件`import '@babel/ployfill'`或使用以下的按需引入</span>
        <span class="token punctuation">[</span> <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
          <span class="token literal-property property">useBuiltIns</span><span class="token operator">:</span> 'usage<span class="token punctuation">,</span>   <span class="token comment">//按需加载  </span>
          <span class="token literal-property property">corejs</span><span class="token operator">:</span> <span class="token punctuation">{</span>         <span class="token comment">// 指定core-js版本</span>
            <span class="token literal-property property">ersion</span><span class="token operator">:</span> <span class="token number">3</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>   
          <span class="token literal-property property">targets</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token comment">// 指定兼容性做到哪个版本浏览器</span>
            <span class="token literal-property property">chrome</span><span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">firefox</span><span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">ie</span><span class="token operator">:</span> <span class="token string">'9'</span> <span class="token punctuation">,</span>
            <span class="token comment">// ...</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间: </span> <span class="time">2022年5月8日星期日上午9点26分</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/docsz/demo/webpack/studyWebP2.html">
            webpack资源打包（下）
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/docsz/demo/webpack/studyWebP.html#什么是webpack" class="sidebar-link reco-side-什么是webpack" data-v-cb1513f6>什么是webpack？</a></li><li class="level-3" data-v-cb1513f6><a href="/docsz/demo/webpack/studyWebP.html#插件安装" class="sidebar-link reco-side-插件安装" data-v-cb1513f6>插件安装</a></li><li class="level-2" data-v-cb1513f6><a href="/docsz/demo/webpack/studyWebP.html#资源打包" class="sidebar-link reco-side-资源打包" data-v-cb1513f6>资源打包</a></li><li class="level-3" data-v-cb1513f6><a href="/docsz/demo/webpack/studyWebP.html#配置文件webpack-config-js" class="sidebar-link reco-side-配置文件webpack-config-js" data-v-cb1513f6>配置文件webpack.config.js</a></li><li class="level-3" data-v-cb1513f6><a href="/docsz/demo/webpack/studyWebP.html#css" class="sidebar-link reco-side-css" data-v-cb1513f6>css</a></li><li class="level-3" data-v-cb1513f6><a href="/docsz/demo/webpack/studyWebP.html#html" class="sidebar-link reco-side-html" data-v-cb1513f6>html</a></li><li class="level-3" data-v-cb1513f6><a href="/docsz/demo/webpack/studyWebP.html#图片资源打包" class="sidebar-link reco-side-图片资源打包" data-v-cb1513f6>图片资源打包</a></li><li class="level-3" data-v-cb1513f6><a href="/docsz/demo/webpack/studyWebP.html#打包其他资源" class="sidebar-link reco-side-打包其他资源" data-v-cb1513f6>打包其他资源</a></li><li class="level-3" data-v-cb1513f6><a href="/docsz/demo/webpack/studyWebP.html#js语法检查与兼容性" class="sidebar-link reco-side-js语法检查与兼容性" data-v-cb1513f6>js语法检查与兼容性</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><!----><!----><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/docsz/assets/mp4/xueyue.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:10px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/docsz/assets/img/xueyue.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/docsz/assets/img/xueyue.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>雪月</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>王玲琳</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到浅笑的个人博客
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="200" height="282" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/docsz/assets/js/app.22c8ad57.js" defer></script><script src="/docsz/assets/js/3.837f952b.js" defer></script><script src="/docsz/assets/js/1.3b490a96.js" defer></script><script src="/docsz/assets/js/53.32df1ffa.js" defer></script>
  </body>
</html>
